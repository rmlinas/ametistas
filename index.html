<!doctype html>
<html lang="lt">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Atraskite Savo Akmenį: Tikra Energija, Tikrai Jums | Ametistas.lt</title>
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;700&family=Inter:wght@300;400;600&display=swap">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
  
  <style>
    /* Baziniai stiliai palikti */
    :root {
      --color-primary: #3C2459; --color-dark: #0F0018; --color-accent: #D4AF37; 
      --color-bg-light: #FBFAFF; --color-text: #111; --color-muted: #666;
      --color-section-light: #f7f7f7; --font-size-h1: clamp(2.2rem, 6vw, 4rem); 
      --font-size-h2: clamp(1.8rem, 4vw, 2.5rem); --radius: 8px;
      --space-mobile: 1.5rem; --space-section: 5rem;
    }
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html { font-family: 'Inter', system-ui, sans-serif; line-height: 1.6; scroll-behavior: smooth; }
    body { overflow-x: hidden; color: var(--color-text); background: var(--color-bg-light); }
    h1, h2, h3, h4 { font-family: 'Cormorant Garamond', serif; color: var(--color-primary); line-height: 1.1; margin-bottom: 0.5rem; word-wrap: break-word; }
    .container { width: min(100% - calc(2 * var(--space-mobile)), 1200px); margin-inline: auto; }
    section { padding: var(--space-section) 0; }
    .section--light { background: var(--color-section-light); }
    .visually-hidden { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border: 0; }
    
    /* GRID STILIAI */
    .grid { display: grid; gap: 2rem; }
    @media (min-width: 769px) {
        .grid--2-cols { grid-template-columns: 1fr 1fr; }
        .grid--3-cols { grid-template-columns: repeat(3, 1fr); }
    }

    /* MYGTUKAI STILIAI palikti */
    .btn { padding: 0.8rem 1.5rem; border-radius: var(--radius); font-weight: 600; text-align: center; display: inline-flex; align-items: center; justify-content: center; gap: 0.5rem; cursor: pointer; border: none; max-width: 100%; text-decoration: none; transition: transform 0.3s, box-shadow 0.3s; }
    .btn--primary { background: var(--color-primary); color: var(--color-bg-light); }
    .btn--ghost { border: 1.5px solid var(--color-accent); color: var(--color-accent); background: none; }
    .btn--primary:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(60,36,89,0.5); }
    .btn:focus { outline: 2px solid var(--color-accent); outline-offset: 3px; }

    /* === HEADER & NAVIGACIJA (FIX: Scroll Logikos CSS) === */
    header { 
        position: sticky; top: 0; z-index: 1000; background: var(--color-bg-light); 
        border-bottom: 1px solid rgba(0,0,0,0.08); 
        transition: box-shadow 0.3s, background-color 0.3s, transform 0.3s ease-in-out; /* ĮJUNGTA */
    }
    header.scrolled { box-shadow: 0 2px 10px rgba(0,0,0,0.15); } /* ĮJUNGTA */
    header.hide-on-scroll { transform: translateY(-100%); } /* ĮJUNGTA */
    
    .header-nav { display: flex; justify-content: space-between; align-items: center; padding: 1rem 0; }
    
    .nav-links { display: none; }
    @media (min-width: 769px) { .nav-links { display: flex; gap: 1.5rem; } }

    /* Mobilus Meniu */
    .mobile-toggle { width: 44px; height: 44px; display: grid; place-items: center; border: none; background: none; cursor: pointer; z-index: 10000; position: relative; }
    .mobile-toggle .fas { transition: opacity 0.3s, transform 0.3s; color: var(--color-primary); font-size: 1.5rem; position: absolute; }
    .mobile-toggle[aria-expanded="true"] .fa-bars { opacity: 0; transform: rotate(90deg); }
    .mobile-toggle[aria-expanded="false"] .fa-times { opacity: 0; transform: rotate(-90deg); }
    .mobile-toggle[aria-expanded="true"] .fa-times { opacity: 1; transform: rotate(0); }
    .mobile-toggle[aria-expanded="false"] .fa-bars { opacity: 1; transform: rotate(0); }

    .menu--mobile {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--color-bg-light);
        transform: translateX(-100%); 
        transition: transform 0.3s ease-in-out; 
        z-index: 9999; padding: 2rem; display: flex; flex-direction: column; gap: 1.5rem;
    }
    .menu--mobile.is-open { transform: translateX(0); }
    .menu--mobile .close-btn { align-self: flex-end; font-size: 1.5rem; background: none; border: none; cursor: pointer; color: var(--color-primary); }
    .menu--mobile a { font-size: 1.5rem; color: var(--color-dark); text-decoration: none; }

    /* HERO */
    .hero { 
        display: flex; flex-direction: column; justify-content: center; align-items: center; 
        text-align: center; min-height: 70vh; overflow: hidden; position: relative; 
        background: var(--color-primary);
    }
    .hero-img { 
        will-change: transform; transition: transform 0.5s ease-out; 
        position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
        object-fit: cover; z-index: -2; 
    }
    .hero-img { display: none; } /* Paslėpta, kol neįkelsite tikros nuotraukos */
    .hero::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.3); z-index: -1; }
    .hero-content {
        z-index: 10; color: white; padding: 0 var(--space-mobile); max-width: 100%;
    }
    .hero-content h1 { color: white; word-break: break-word; }

    /* FACEBOOK LOADER paliktas */
    .fb-load-area { min-height: 500px; display: grid; place-items: center; background: #fff; border: 1px solid #ddd; border-radius: 8px; position: relative; }
    .fb-load-area.loading { display: flex; justify-content: center; align-items: center; }
    .fb-load-area.loading::after { 
        content: ""; width: 40px; height: 40px; border: 4px solid #D4AF37; 
        border-top: 4px solid transparent; border-radius: 50%; animation: spin 1s linear infinite;
    }
    @keyframes spin { 0% { transform: rotate(0deg);} 100% { transform: rotate(360deg);} }
    
    /* Kiti stiliai palikti */
    .form--consult input { display: block; width: 100%; padding: 10px; margin-bottom: 1rem; border: 1px solid #ccc; border-radius: 4px; }
    .step-card { padding: 1.5rem; background: white; border-radius: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.08); }
    .step-card i { font-size: 2rem; color: var(--color-accent); margin-bottom: 0.8rem; }
    .footer { background: var(--color-dark); color: white; padding: 3rem 0; text-align: center; }
  </style>
</head>
<body>

  <script defer>
    document.addEventListener('DOMContentLoaded', function() {
        // Navigacijos įkėlimas paliktas
        const navItems = [
            { href: '#kolekcijos-perziura', text: 'Kolekcijos' },
            { href: '#astromineralogija', text: 'Konsultacijos' },
            { href: '#kontaktai', text: 'Kontaktai' },
        ];
        const renderNav = (targetId) => {
            const target = document.getElementById(targetId);
            if (!target) return;
            target.innerHTML = navItems.map(item => `<a href="${item.href}">${item.text}</a>`).join('');
        };
        renderNav('desktop-nav-links');
        renderNav('mobile-nav-links');

        const mobileToggle = document.getElementById('mobileToggle');
        const mobileMenu = document.getElementById('mobileMenu');
        const mobileClose = document.getElementById('mobileClose');
        const header = document.querySelector('header');
        const hero = document.querySelector('.hero');
        const heroImg = document.querySelector('.hero-img');
        
        // Meniu Valdymas paliktas
        const closeMenu = () => { mobileMenu?.classList.remove('is-open'); mobileToggle?.setAttribute('aria-expanded', 'false'); };
        const openMenu = () => { mobileMenu?.classList.add('is-open'); mobileToggle?.setAttribute('aria-expanded', 'true'); };
        
        mobileToggle?.addEventListener('click', () => {
            mobileMenu?.classList.contains('is-open') ? closeMenu() : openMenu();
        });
        mobileMenu?.querySelectorAll('a').forEach(link => { link.addEventListener('click', closeMenu); });
        mobileClose?.addEventListener('click', closeMenu);

        
        // --- SCROLL HANDLERIAI (ĮJUNGTI) ---
        const debounce = (func, wait) => {
          let timeout;
          return function(...args) {
            clearTimeout(timeout);
            timeout = setTimeout(() => func.apply(this, args), wait);
          }
        };
        const getScrollPos = () => window.scrollY || document.documentElement.scrollTop; 

        let lastScroll = 0;
        const handleScroll = () => {
            const currentScroll = getScrollPos();
            
            // Header Hide/Show (Tai galėjo sukelti "nesąmonę")
            if(currentScroll > 100) { 
                if(currentScroll > lastScroll) {
                    header.classList.add('hide-on-scroll'); // Slėpti
                } else {
                    header.classList.remove('hide-on-scroll'); // Rodyti
                }
            } else {
                 header.classList.remove('hide-on-scroll'); // Rodyti, jei pačiame viršuje
            }
            lastScroll = currentScroll;

            // Sticky Shadow
            if (currentScroll > 50) { header?.classList.add('scrolled'); } 
            else { header?.classList.remove('scrolled'); }

            // Hero Parallax (ĮJUNGTA)
            if(hero && heroImg && heroImg.style.display !== 'none'){
                const maxOffset = hero.offsetHeight * 0.3; 
                let offset = Math.min(currentScroll * 0.2, maxOffset);
                heroImg.style.transform = `translateY(${offset}px)`;
            }
            
            // Navigacijos Highlight atjungtas, kad būtų paprasčiau

        };

        window.addEventListener('scroll', debounce(handleScroll, 20));
        handleScroll();


        // --- FACEBOOK CLICK-TO-LOAD (Patobulinta, kad veiktų mobiliai) ---
        const fbButton = document.getElementById('loadFacebookFeed');
        const fbArea = document.getElementById('fbLoadArea');
        let sdkLoaded = false;

        fbButton?.addEventListener('click', function() {
            if (fbArea.classList.contains('loading')) return;

            fbArea.classList.add('loading');

            setTimeout(() => {
                fbArea.classList.remove('loading');
                
                const fbContainer = document.createElement('div');
                fbContainer.className = 'fb-page';
                // Mobilioje versijoje turėtume naudoti mažesnį plotį arba auto
                fbContainer.setAttribute('data-href', 'https://www.facebook.com/ametistaslt');
                fbContainer.setAttribute('data-tabs', 'timeline');
                fbContainer.setAttribute('data-width', '100%'); // Kritinis pokytis mobiliai
                fbContainer.setAttribute('data-height', '500');
                fbContainer.setAttribute('data-small-header', 'true');
                fbContainer.setAttribute('data-adapt-container-width', 'true');
                fbContainer.setAttribute('data-hide-cover', 'false');
                fbContainer.setAttribute('data-show-facepile', 'false');

                fbArea.innerHTML = ''; 
                fbArea.style.display = 'block'; 
                fbArea.style.minHeight = 'auto';
                fbArea.appendChild(fbContainer);

                if (!sdkLoaded) {
                    (function(d, s, id) {
                      var js, fjs = d.getElementsByTagName(s)[0];
                      if (d.getElementById(id)) return;
                      js = d.createElement(s); js.id = id;
                      js.src = "https://connect.facebook.net/lt_LT/sdk.js#xfbml=1&version=v20.0";
                      fjs.parentNode.insertBefore(js, fjs);
                    }(document, 'script', 'facebook-jssdk'));
                    sdkLoaded = true;
                } 
                
                // Visada paleisti FB.XFBML.parse() po elemento įkėlimo (užtikrinimui)
                if (window.FB && window.FB.XFBML) {
                    window.FB.XFBML.parse(); 
                }
            }, 500);
        });
        
        // Formos validacija palikta minimali
        const form = document.getElementById('consult-form');
        form?.addEventListener('submit', function(e) { e.preventDefault(); this.submit(); });
        
    });
  </script>
</body>
</html>
